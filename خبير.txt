const path = require('path');

adminRouter.get('/test.html', vrefiyUser, (req, res) => {
    res.sendFile(path.join(__dirname, 'public', 'test.html'));
});






اضافة خبير
كتابة على الملفات 




    public async writeToJSONFile(expertId: number, main_topic: string, sub_topic: string, ayah: string, tafsir: string, surah: string) {
        const filePath = path.join(__dirname, `expert_${expertId}.json`);
        let data = [];

        // إنشاء ملف جديد إذا لم يكن موجودًا
        if (!fs.existsSync(filePath)) {
            fs.writeFileSync(filePath, JSON.stringify([], null, 2), 'utf-8');
        }

        // قراءة البيانات الحالية إن وجدت
        const fileContent = fs.readFileSync(filePath, 'utf-8');
        try {
            data = JSON.parse(fileContent);
        } catch (error) {
            console.error("Error parsing JSON file: ", error);
        }

        // إضافة البيانات الجديدة
        data.push({
            main_topic,
            sub_topic,
            surah,
            ayah,
            tafsir
        });

        // كتابة البيانات في الملف الخاص بالخبير
        fs.writeFileSync(filePath, JSON.stringify(data, null, 2), 'utf-8');
    }